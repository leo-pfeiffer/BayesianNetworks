<!DOCTYPE html>
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>CNX Expert System</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
</head>
<body>
<div id="app" class="container">
    <section class="hero">
        <div class="hero-body">
            <p class="title">
                CNX Expert System
            </p>
        </div>
    </section>
    <div class="card">
        <div class="card-header">
            <div class="card-header-title">
                Inputs
            </div>
        </div>
        <div class="card-content">
            <div class="is-center">

                <div class="field is-horizontal">
                    <div class="field-label">
                        <label class="label">Query</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-narrow">
                            <div class="control">
                                <div class="select">
                                    <select v-model="queryNode">
                                        <option>A</option>
                                        <option>B</option>
                                        <option>C</option>
                                    </select>
                                </div>
                                <div class="select">
                                    <select v-model="queryValue">
                                        <option value="T">True</option>
                                        <option value="F">False</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-label">
                        <label class="label">Evidence</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-expanded">
                            <div class="field has-addons">
                                <p class="control is-expanded">
                                    <input class="input" type="text" placeholder="Evidence" v-model="evidence">
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-label is-normal">
                        <label class="label">Order</label>
                    </div>
                    <div class="field-body">
                        <div class="field is-narrow">
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select v-model="order">
                                        <option value="MC">Max Cardinality</option>
                                        <option value="GME">Greedy Min Edges</option>
                                        <option value="Custom">Custom</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="field is-expanded">
                            <div class="field has-addons">
                                <p class="control is-expanded">
                                    <input v-bind="{'disabled': !customOrder}" v-model="providedOrder"
                                           class="input" type="text" placeholder="Order">
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-body">
                        <div class="field">
                            <div class="control">
                                <button class="button is-primary" @click="submit">
                                    Submit
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="box">
                    Outputs ...
                </div>

            </div>
        </div>
    </div>

</div>
</body>
<script>
    window.onload = () => {
        new Vue({
            el: '#app',
            data: {
                message: 'Hello Vue!',
                order: "",
                providedOrder: "",
                queryNode: "",
                queryValue: "",
                evidence: ""
            },
            computed: {
                customOrder: function() {
                    return this.order === "Custom"
                }
            },
            methods: {
                submit: function() {
                    const obj = {
                        queryNode: this.queryNode,
                        queryValue: this.queryValue,
                        evidence: this.evidence,
                        order: this.order,
                        providedOrder: this.providedOrder
                    }
                    this.post(obj)
                },
                post: function(data) {
                    fetch("/", {
                        method: "POST",
                        headers: {"content-type": "application/json"},
                        body: JSON.stringify(data)
                    }).then(res => res.json())
                        .then(jsn => console.log(jsn))
                }
            }
        })
    }
</script>
<style>
    #app {
        font-family: Avenir, Helvetica, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-align: center;
        color: #2c3e50;
        margin-top: 60px;
    }

    .card-footer-item {
        cursor: pointer;
    }

    .card {
        margin-left: 50px;
        margin-right: 50px;
    }
</style>
</html>